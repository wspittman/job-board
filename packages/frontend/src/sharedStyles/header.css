.appbar {
  display: flex;
  position: sticky;
  top: 0;
  z-index: 1100;
  padding: 0 var(--space-lg);
  height: var(--header-height);
  background: var(--primary-main);
  color: var(--text-contrast);
  align-items: center;
  box-shadow: var(--shadow-soft);
}

.nav {
  display: flex;
  flex: 1;
  height: 75%;
  align-items: center;
}

.app-link {
  line-height: var(--heading-line-height);
  text-decoration: none;

  &:hover {
    text-decoration: underline;
    text-underline-offset: var(--space-xs);
  }
}

.brand {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  font-size: var(--h3-size);
  height: 100%;
}

.header-logo {
  height: 100%;
  background: var(--bg-default);
  border-radius: var(--radius);
  aspect-ratio: 1 / 1;
  position: relative;

  & svg {
    position: absolute;
  }

  & .lucide-funnel {
    transform: scale(-1, 1);
    width: 70%;
    height: 70%;
    stroke: var(--primary-main);
    fill: var(--bg-hover);
    position: relative;
    left: 15%;
    top: 15%;
  }

  & .lucide-dollar-sign {
    top: 60%;
    left: 60%;
    width: 40%;
    height: 40%;
    stroke: darkgreen;
  }

  & .random-icon svg {
    top: calc(5% + var(--dy, 0));
    left: calc(30% + var(--dx, 0));
    width: calc(40% + var(--ds, 0));
    height: calc(40% + var(--ds, 0));
    stroke: hsl(var(--dc));
  }
}

.spacer {
  flex: 1;
}

/* Hamburger, Toggle, and Backdrop */

.menu-toggle {
  display: none;
  opacity: 0;
  width: 1px;
  height: 1px;
  pointer-events: none;
}

.hamburger {
  display: none;
  height: var(--space-xl);
  justify-content: center;
  cursor: pointer;
  border-radius: var(--radius);
  transition: background-color 200ms ease-in-out;

  & svg {
    position: absolute;
    height: inherit;
    transition:
      opacity 0.22s ease,
      transform 0.22s ease;
    will-change: opacity, transform;
  }
}

.menu-toggle:focus-visible ~ .hamburger svg {
  background: var(--primary-dark);
}

/* start state */
.lucide-menu {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}
.lucide-x {
  opacity: 0;
  transform: scale(0.85) rotate(-90deg);
}

/* toggled state */
.menu-toggle:checked ~ .hamburger .lucide-menu {
  opacity: 0;
  transform: scale(0.85) rotate(90deg);
}
.menu-toggle:checked ~ .hamburger .lucide-x {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}

@media (max-width: 600px) {
  .menu-toggle:checked ~ .menu-backdrop {
    display: block;
    opacity: 1;
    pointer-events: auto;
  }

  .hamburger {
    display: flex;
  }
}

.menu-backdrop {
  display: none;
  position: fixed;
  top: var(--header-height);
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg-backdrop);
  z-index: 1099;
  opacity: 0;
  transition: opacity 250ms ease-in-out;
  pointer-events: none;
}

/* Desktop Nav */

.nav-links {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.nav-divider {
  display: none;
}

.ext-link {
  display: inline-flex;
  border-radius: 999px;

  &:hover {
    background: var(--primary-dark);
  }
}

/* Mobile Nav */

@media (max-width: 600px) {
  .menu-toggle {
    display: block;
  }

  .nav-links {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background: var(--bg-default);
    color: var(--text-default);
    flex-direction: column;
    align-items: stretch;
    padding: var(--space-sm);
    gap: var(--space-xs);
    box-shadow: var(--shadow-soft);
    border-radius: 0 0 0 var(--radius);
    overflow: hidden;
    z-index: 1100;
  }

  .menu-toggle:checked ~ .nav-links {
    max-height: 400px;
    display: flex;
  }

  .nav-link {
    padding: var(--space-md);
    border-radius: var(--radius);
    transition: background-color 150ms ease-in-out;
    text-decoration: none;

    &:hover {
      text-decoration: none;
      background: var(--bg-hover);
    }

    &:active {
      background: var(--bg-active);
    }
  }

  .nav-divider {
    display: block;
    height: 1px;
    background: var(--bg-active);
    margin: var(--space-sm);
  }

  .ext-link {
    align-items: center;
    padding: var(--space-md);
    gap: var(--space-sm);
    border-radius: var(--radius);
    text-decoration: none;
    transition: background-color 150ms ease-in-out;

    &:hover {
      background: var(--bg-hover);
    }

    &:active {
      background: var(--bg-active);
    }
  }

  .bsky-btn {
    &::before {
      content: "Follow on Bluesky";
    }
  }

  .gh-btn {
    &::before {
      content: "View on GitHub";
    }
  }
}
